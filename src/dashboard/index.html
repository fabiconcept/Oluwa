<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Track your performance</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../../styles/output.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.js"></script>

    <script>
        
    </script>
</head>
<body class="grid grid-cols-[20rem_1fr]">
    <div id="sideBar" class="flex items-center justify-center h-screen flex-col">
        <span class="animate-pulse">Loading Component...</span>
        <!-- sideBar imported here -->
    </div>

    <div class="h-screen w-full border overflow-y-scroll p-6">
        <div id="topBar" class="flex items-center justify-center h-fit">
            <span class="animate-pulse">Loading Component...</span>
            <!-- topBar imported here -->
        </div>
        <div id="statBoard" class="flex items-center justify-center h-fit my-4">
            <span class="animate-pulse">Loading Component...</span>
            <!-- topBar imported here -->
        </div>
        
        <div id="recentTable" class="flex items-center justify-center h-fit">
            <span class="animate-pulse">Loading Component...</span>
            <!-- topBar imported here -->
        </div>

    </div>
    
    <!-- <script src="/src/dashboard/lib/index.js"></script> -->
    <script type="module" defer>
        import { customImportComponent, dashboardState, fetchDashboardData, performLogOut } from "/src/dashboard/lib/index.js";
        customImportComponent("./dashboard/components/sideBar.html", "sideBar");
        
        await fetchDashboardData();
        await customImportComponent("./dashboard/components/topBar.html", "topBar");
        await customImportComponent("./dashboard/components/statBoard.html", "statBoard");
        await customImportComponent("./dashboard/components/recentTable.html", "recentTable");

        setTimeout(() => {
            document.getElementById("username").innerText = dashboardState.studentName;
        }, 500);
        let logOutBtn = null;

        setTimeout(() => {
            logOutBtn = document.getElementById("logOut");
            logOutBtn.addEventListener("click", () => performLogOut());
        }, 2000);

        document.readyState(()=>{
            document.getElementById("myTable").DataTable();
        })
    </script>

<script>
    
</script>
</body>
</html>